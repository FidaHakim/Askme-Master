<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Askme Master | FidaHakim Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&family=Outfit:wght@300;600;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://js.puter.com/v2/"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --bd-green: #006a4e; --bd-red: #f42a41; --bg: #010409; --glass: rgba(0, 106, 78, 0.05); }
        body { font-family: 'Outfit', 'Hind Siliguri', sans-serif; background: var(--bg); color: #e6edf3; height: 100dvh; display: flex; margin: 0; overflow: hidden; }
        
        /* Patriotic Theme Gradient */
        .patriotic-gradient { background: linear-gradient(135deg, var(--bd-green) 0%, #010409 100%); }
        
        /* Bangladesh Flag Icon */
        .flag-box { width: 32px; height: 19.2px; background: var(--bd-green); position: relative; border-radius: 3px; display: inline-block; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
        .flag-circle { width: 11px; height: 11px; background: var(--bd-red); border-radius: 50%; position: absolute; top: 50%; left: 45%; transform: translate(-50%, -50%); box-shadow: 0 0 10px var(--bd-red); }

        /* Glowing FidaHakim Badge */
        .dev-badge { background: rgba(244, 42, 65, 0.1); border: 1px solid var(--bd-red); color: var(--bd-red); padding: 2px 10px; border-radius: 20px; font-size: 10px; font-weight: 800; letter-spacing: 1px; text-transform: uppercase; box-shadow: 0 0 15px rgba(244, 42, 65, 0.2); }

        #chat-flow { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 16px; scroll-behavior: smooth; }
        .msg { padding: 16px 20px; border-radius: 24px; max-width: 85%; line-height: 1.7; position: relative; animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        .user { align-self: flex-end; background: var(--bd-green); color: white; border-bottom-right-radius: 4px; box-shadow: 0 8px 20px -5px rgba(0, 106, 78, 0.4); }
        .ai { align-self: flex-start; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255,255,255,0.08); border-bottom-left-radius: 4px; backdrop-filter: blur(10px); }
        
        .no-scrollbar::-webkit-scrollbar { width: 0; background: transparent; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .input-container { background: rgba(13, 17, 23, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(0, 106, 78, 0.3); border-radius: 24px; }
        .bd-shadow { box-shadow: 0 0 30px rgba(0, 106, 78, 0.15); }
    </style>
</head>
<body class="patriotic-gradient">

    <aside class="hidden lg:flex w-72 flex-col p-6 m-4 mr-0 rounded-[30px] bg-black/40 border border-white/5 backdrop-blur-3xl">
        <div class="mb-8 flex flex-col items-center text-center">
            <div class="flag-box mb-4"><div class="flag-circle"></div></div>
            <h2 class="text-2xl font-black tracking-tighter text-white">Askme <span class="text-emerald-500">Master</span></h2>
            <div class="mt-2 dev-badge">Developer: FidaHakim</div>
        </div>

        <div class="flex-1 overflow-y-auto no-scrollbar space-y-3" id="history-list">
            <p class="text-[10px] text-emerald-500/50 font-bold uppercase tracking-[0.2em] mb-4">Memory Nodes</p>
        </div>

        <div class="pt-6 border-t border-white/10">
            <div class="flex items-center gap-3 text-slate-400">
                <i class="fas fa-map-marker-alt text-red-500"></i>
                <div class="text-[11px] font-bold">Dhaka, BD</div>
            </div>
        </div>
    </aside>

    <main class="flex-1 flex flex-col p-4">
        <header class="flex justify-between items-center p-4 bg-white/5 rounded-3xl border border-white/10 mb-4 backdrop-blur-md bd-shadow">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-500 border border-emerald-500/20">
                    <i class="fas fa-microchip text-sm"></i>
                </div>
                <div>
                    <h1 class="text-sm font-black text-white uppercase tracking-tighter">Patriot Station</h1>
                    <span id="status" class="text-[9px] font-bold text-emerald-500 uppercase">System Live ‚Ä¢ Puter Cloud</span>
                </div>
            </div>

            <div onclick="toggleMode()" id="mode-btn" class="flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 cursor-pointer hover:bg-emerald-500/10 transition-all">
                <div id="mode-dot" class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                <span id="mode-label" class="text-[10px] font-bold text-white uppercase">Online</span>
            </div>
        </header>

        <div id="chat-flow" class="no-scrollbar"></div>

        <footer class="mt-auto pt-4">
            <div class="max-w-4xl mx-auto input-container p-2 flex items-end gap-2 bd-shadow">
                <button onclick="localAction('joke')" class="w-11 h-11 flex items-center justify-center text-slate-500 hover:text-emerald-500 transition">
                    <i class="fas fa-face-smile"></i>
                </button>
                
                <textarea id="u-input" rows="1" class="flex-1 bg-transparent p-3 outline-none text-sm text-white placeholder-slate-600 resize-none max-h-32" placeholder="Askme-‡¶ï‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡ßá‡¶∏ ‡¶ï‡¶∞‡ßÅ‡¶®..." oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'"></textarea>
                
                <button onclick="processChat()" class="w-11 h-11 bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl flex items-center justify-center shadow-lg transition-all active:scale-90">
                    <i class="fas fa-paper-plane text-xs"></i>
                </button>
            </div>
            <p class="text-[9px] text-center mt-3 text-emerald-500/40 font-bold uppercase tracking-[0.3em]">
                Askme Master v79 ‚Ä¢ Build by FidaHakim üáßüá©
            </p>
        </footer>
    </main>

    <script>
        let isOnline = true;

        window.onload = () => {
            loadMemory();
            if (document.getElementById('chat-flow').children.length === 0) {
                addMsg('ai', "‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ **Askme**! \n‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶è‡¶Ü‡¶á ‡¶∏‡ßç‡¶ü‡ßá‡¶∂‡¶®‡•§ ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞ **FidaHakim** ‡¶è‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶è‡¶á ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ‡ßá ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡•§", false);
            }
        };

        function toggleMode() {
            isOnline = !isOnline;
            const label = document.getElementById('mode-label');
            const dot = document.getElementById('mode-dot');
            const status = document.getElementById('status');
            
            label.innerText = isOnline ? "Online" : "Offline";
            dot.className = isOnline ? "w-2 h-2 rounded-full bg-emerald-500 animate-pulse" : "w-2 h-2 rounded-full bg-red-500";
            status.innerText = isOnline ? "System Live ‚Ä¢ Puter Cloud" : "Local Brain ‚Ä¢ Offline Mode";
            
            addMsg('ai', isOnline ? "üåê **‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶Æ‡ßã‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§**" : "üîå **‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶® ‡¶Æ‡ßã‡¶°‡•§** ‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶ñ‡¶® ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡¶ø‡•§", false);
        }

        async function processChat() {
            const input = document.getElementById('u-input');
            const text = input.value.trim();
            if (!text) return;

            addMsg('user', text);
            input.value = '';
            input.style.height = 'auto';
            const aiBox = addMsg('ai', '<i class="fas fa-atom fa-spin text-emerald-500"></i> Thinking...');

            // Math Engine
            if (/^[0-9+\-*/().\s^]+$/.test(text)) {
                try {
                    const result = eval(text.replace(/\^/g, '**'));
                    aiBox.innerHTML = `üìä **Math Result:** ${result}`;
                    return;
                } catch(e) {}
            }

            if (isOnline) {
                puter.ai.chat(text, { model: 'gemini-3-flash-preview' }).then(res => {
                    aiBox.innerHTML = marked.parse(res.toString());
                    saveMemory('ai', res.toString());
                }).catch(() => {
                    aiBox.innerHTML = "üõë ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¨‡¶ø‡¶ö‡ßç‡¶õ‡¶ø‡¶®‡ßç‡¶®‡•§";
                });
            } else {
                aiBox.innerHTML = "‡¶Ü‡¶Æ‡¶ø ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶® ‡¶Æ‡ßã‡¶°‡ßá ‡¶Ü‡¶õ‡¶ø‡•§ ‡¶ú‡¶ü‡¶ø‡¶≤ ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶Æ‡ßã‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
            }
        }

        function localAction(type) {
            if(type === 'joke') {
                const jokes = ["Why don't scientists trust atoms? Because they make up everything!", "‡¶¨‡¶á ‡¶ï‡ßá‡¶® ‡¶ï‡¶æ‡¶Å‡¶¶‡ßá? ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶§‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßá‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ (problems)!"];
                addMsg('ai', `üé≠ ${jokes[Math.floor(Math.random() * jokes.length)]}`, false);
            }
        }

        function addMsg(role, text, save = true) {
            const d = document.createElement('div');
            d.className = `msg ${role} prose prose-invert max-w-full lg:max-w-[85%]`;
            d.innerHTML = text.includes('<i') ? text : marked.parse(text);
            document.getElementById('chat-flow').appendChild(d);
            document.getElementById('chat-flow').scrollTop = 999999;
            if (role === 'user' && save) saveMemory(role, text);
            return d;
        }

        function saveMemory(role, text) {
            let history = JSON.parse(localStorage.getItem('askme_v79_mem')) || [];
            history.push({ role, text });
            if (history.length > 15) history.shift();
            localStorage.setItem('askme_v79_mem', JSON.stringify(history));
            renderHistory();
        }

        function renderHistory() {
            const history = JSON.parse(localStorage.getItem('askme_v79_mem')) || [];
            const list = document.getElementById('history-list');
            list.innerHTML = '<p class="text-[10px] text-emerald-500/50 font-bold uppercase tracking-[0.2em] mb-4">Memory Nodes</p>';
            history.filter(m => m.role === 'user').reverse().slice(0, 5).forEach(m => {
                const item = document.createElement('div');
                item.className = "p-3 bg-white/5 rounded-2xl truncate cursor-pointer hover:bg-emerald-500/10 transition-all text-[11px] border border-white/5";
                item.innerText = m.text;
                item.onclick = () => document.getElementById('u-input').value = m.text;
                list.appendChild(item);
            });
        }

        function loadMemory() {
            const history = JSON.parse(localStorage.getItem('askme_v79_mem')) || [];
            history.forEach(m => addMsg(m.role, m.text, false));
            renderHistory();
        }
    </script>
</body>
</html>
