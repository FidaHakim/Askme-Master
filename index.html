<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Askme ‚Äî Singularity Ultra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://js.puter.com/v2/"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root { --gemini-bg: #ffffff; --gemini-surface: #f0f4f9; }
        body { font-family: 'Outfit', sans-serif; background: var(--gemini-bg); color: #1f1f1f; height: 100dvh; display: flex; flex-direction: column; overflow: hidden; margin: 0; }
        
        #chat-container { scroll-behavior: smooth; overflow-y: auto; scrollbar-width: none; }
        #chat-container::-webkit-scrollbar { display: none; }

        .gradient-text { background: linear-gradient(74deg, #4285f4 0%, #9b72cb 19%, #d96570 73%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 500; }
        
        /* Message Styles */
        .msg-user { background: #f0f4f9; border-radius: 1.5rem; padding: 12px 20px; align-self: flex-end; max-width: 85%; margin-bottom: 24px; font-size: 0.95rem; line-height: 1.5; }
        .msg-ai { width: 100%; display: flex; gap: 16px; margin-bottom: 32px; animation: fadeIn 0.4s ease; }
        
        .ai-icon { width: 30px; height: 30px; border-radius: 50%; background: linear-gradient(135deg, #4285f4, #9b72cb, #d96570); flex-shrink: 0; }
        
        /* Floating Input Pill */
        .input-wrapper { background: #f0f4f9; border-radius: 32px; padding: 6px 16px; display: flex; items-center: center; box-shadow: 0 2px 6px rgba(0,0,0,0.05); transition: background 0.2s; }
        .input-wrapper:focus-within { background: #e8eaed; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        #sidebar { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 100; }
        .sidebar-item { border-radius: 0 24px 24px 0; transition: background 0.2s; cursor: pointer; }
        .sidebar-item:hover { background: #e8eaed; }
        
        .prose pre { background: #f8f9fa !important; border-radius: 12px; padding: 16px; border: 1px solid #eef0f2; overflow-x: auto; }
    </style>
</head>
<body>

<div id="overlay" class="fixed inset-0 hidden bg-black/20 backdrop-blur-sm z-50" onclick="UI.toggleMenu()"></div>

<aside id="sidebar" class="fixed inset-y-0 left-0 w-72 bg-[#f8f9fa] transform -translate-x-full flex flex-col z-[60]">
    <div class="p-6">
        <button onclick="UI.resetChat()" class="flex items-center gap-3 px-4 py-3 bg-blue-50 text-blue-700 rounded-full font-bold text-sm hover:bg-blue-100 transition w-full">
            <span>+</span> New Chat
        </button>
    </div>
    
    <div class="flex-1 overflow-y-auto px-2">
        <p class="px-4 text-[11px] font-bold text-gray-400 uppercase tracking-widest mb-4">Core Engines</p>
        <div class="sidebar-item px-4 py-3 text-sm text-gray-700">üåç 150 Countries Atlas</div>
        <div class="sidebar-item px-4 py-3 text-sm text-gray-700">üïí World Clock Pro</div>
        <div class="sidebar-item px-4 py-3 text-sm text-gray-700">üî¢ Math Logic v2</div>
    </div>

    <div class="p-6 border-t border-gray-200">
        <div class="flex items-center justify-between mb-4">
            <span class="text-xs font-bold text-gray-500">Neural Sync</span>
            <input type="checkbox" id="mode" checked class="w-10 h-5 rounded-full bg-gray-300 appearance-none cursor-pointer checked:bg-blue-600 transition-all relative before:content-[''] before:absolute before:w-4 before:h-4 before:bg-white before:rounded-full before:top-0.5 before:left-0.5 checked:before:left-5">
        </div>
        <p class="text-[9px] text-center text-gray-400 font-black uppercase tracking-[2px]">FidaHakim Singularity</p>
    </div>
</aside>

<div class="flex-1 flex flex-col">
    <header class="h-16 flex items-center justify-between px-6 bg-white sticky top-0 z-10">
        <button onclick="UI.toggleMenu()" class="p-2 hover:bg-gray-100 rounded-full">
            <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16" stroke-width="2" stroke-linecap="round"></path></svg>
        </button>
        <div class="flex items-center gap-1">
            <span class="text-xl font-medium text-gray-700">Askme</span>
            <span class="text-[10px] bg-blue-600 text-white px-1.5 py-0.5 rounded font-bold uppercase">Pro</span>
        </div>
        <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-indigo-600 shadow-md"></div>
    </header>

    <main id="chat-container" class="flex-1 flex flex-col p-4 sm:px-20 md:px-40 lg:px-60">
        <div id="hero" class="mt-20 flex flex-col gap-2">
            <h1 class="text-4xl sm:text-5xl font-medium tracking-tight"><span class="gradient-text">Hello, Askme</span></h1>
            <p class="text-2xl sm:text-3xl text-gray-300 font-medium leading-tight">How can I help you today?</p>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-12">
                <div onclick="UI.fill('Time in Japan')" class="p-5 bg-[#f0f4f9] rounded-2xl cursor-pointer hover:bg-[#e8eaed] transition">
                    <p class="text-sm text-gray-600">Check current time across</p>
                    <p class="text-sm font-bold text-gray-800">150+ Countries</p>
                </div>
                <div onclick="UI.fill('Kemon acho?')" class="p-5 bg-[#f0f4f9] rounded-2xl cursor-pointer hover:bg-[#e8eaed] transition">
                    <p class="text-sm text-gray-600">Engage in conversation with</p>
                    <p class="text-sm font-bold text-gray-800">Social Intelligence</p>
                </div>
            </div>
        </div>

        <div id="messages" class="flex flex-col mt-10"></div>
    </main>

    <div class="p-4 sm:px-20 md:px-40 lg:px-60 bg-white">
        <div class="input-wrapper mb-2">
            <input id="query" type="text" spellcheck="false" class="flex-1 bg-transparent border-none outline-none py-3 px-2 text-gray-800 placeholder-gray-500" placeholder="Enter a prompt here" onkeypress="if(event.key==='Enter') App.run()">
            <div class="flex gap-2">
                <button onclick="App.run()" class="p-2 text-blue-600 hover:bg-blue-50 rounded-full transition">
                    <svg class="w-6 h-6 rotate-90" fill="currentColor" viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
                </button>
            </div>
        </div>
        <p class="text-[10px] text-gray-400 text-center py-2">Askme can display inaccurate info, so double-check its responses. Designed by FidaHakim.</p>
    </div>
</div>

<script>
/**
 * üß† MASTER LOGIC CORE
 */
const LogicCore = {
    db: {
        countries: {
            "bangladesh": ["Dhaka", "BDT", "Asia/Dhaka"], "india": ["New Delhi", "INR", "Asia/Kolkata"], "usa": ["Washington D.C.", "USD", "America/New_York"],
            "uk": ["London", "GBP", "Europe/London"], "japan": ["Tokyo", "JPY", "Asia/Tokyo"], "china": ["Beijing", "CNY", "Asia/Shanghai"],
            "saudi": ["Riyadh", "SAR", "Asia/Riyadh"], "uae": ["Abu Dhabi", "AED", "Asia/Dubai"], "russia": ["Moscow", "RUB", "Europe/Moscow"],
            "canada": ["Ottawa", "CAD", "America/Toronto"], "france": ["Paris", "EUR", "Europe/Paris"], "germany": ["Berlin", "EUR", "Europe/Berlin"],
            "australia": ["Canberra", "AUD", "Australia/Canberra"], "italy": ["Rome", "EUR", "Europe/Rome"], "brazil": ["Brasilia", "BRL", "America/Sao_Paulo"]
            // Logic mapping for 150+ countries simplified for script weight
        },
        fakes: [
            "Based on my offline Singularity Core, that seems to be a complex request. Try turning on **Neural Sync** for a real-time answer.",
            "My local database identifies this as a high-level query. Connect to the web for a detailed Gemini-class response.",
            "I've scanned my local 150-country atlas and math engine, but for this specific info, **Neural Sync** is recommended.",
            "Interesting thought! My local processor suggests this might need cloud-level intelligence. Try switching to **Online Mode**."
        ]
    },

    process(q) {
        let l = q.toLowerCase();

        // 1. GREETINGS
        if (l.match(/^(hi|hello|hey|yo|kire)$/)) return `Hello **Askme**! I'm your Singularity Assistant. How can I help you today?`;
        if (l.includes("how are you")) return "I'm doing great, Askme! üöÄ Ready to explore the world's data with you. How about you?";
        if (l.includes("fida") || l.includes("developer")) return "My core was architected by **FidaHakim** to be the ultimate offline assistant.";

        // 2. MATH
        let mathExp = l.replace(/plus/g,'+').replace(/minus/g,'-').replace(/times/g,'*').replace(/divided by/g,'/').replace(/[^-()\d/*+.]/g, '');
        if (mathExp.length > 1 && /[0-9]/.test(mathExp)) {
            try { return `### üî¢ Calc Result\n**Input:** \`${q}\`\n**Output:** \`${eval(mathExp)}\``; } catch(e){}
        }

        // 3. WORLD CLOCK & ATLAS
        for (let k in this.db.countries) {
            if (l.includes(k)) {
                const [cap, cur, tz] = this.db.countries[k];
                if (l.includes('time')) {
                    const t = new Date().toLocaleTimeString('en-US', { timeZone: tz, hour: '2-digit', minute: '2-digit' });
                    return `### üïí World Clock\nIn **${k.toUpperCase()}**, the current time is **${t}**.`;
                }
                return `### üåç Geo Intel: ${k.toUpperCase()}\n- **Capital:** ${cap}\n- **Currency:** ${cur}\n- **Timezone:** ${tz}`;
            }
        }

        // 4. FALLBACK FAKE GENERATOR
        return this.db.fakes[Math.floor(Math.random() * this.db.fakes.length)];
    }
};

const App = {
    async run() {
        const inp = document.getElementById('query');
        const q = inp.value.trim(); if(!q) return;
        const online = document.getElementById('mode').checked;
        
        inp.value = ""; UI.hideHero(); UI.addMessage(q, 'user');
        const lid = UI.addLoader();

        if (online && navigator.onLine) {
            try {
                const res = await puter.ai.chat(q);
                UI.removeLoader(lid); UI.addMessage(res.toString(), 'ai'); return;
            } catch(e) { console.log("Offline Fallback Activated"); }
        }
        
        const res = LogicCore.process(q);
        setTimeout(() => { UI.removeLoader(lid); UI.addMessage(res, 'ai'); }, 500);
    }
};

class UI {
    static toggleMenu() { document.getElementById('sidebar').classList.toggle('-translate-x-full'); document.getElementById('overlay').classList.toggle('hidden'); }
    static hideHero() { document.getElementById('hero')?.classList.add('hidden'); }
    static fill(t) { document.getElementById('query').value = t; App.run(); }
    static scroll() { const c = document.getElementById('chat-container'); c.scrollTop = c.scrollHeight; }
    
    static addMessage(text, role) {
        const container = document.getElementById('messages');
        if (role === 'user') {
            const div = document.createElement('div');
            div.className = "msg-user";
            div.innerText = text;
            container.appendChild(div);
        } else {
            const div = document.createElement('div');
            div.className = "msg-ai";
            div.innerHTML = `<div class="ai-icon"></div><div class="prose text-gray-800 text-[15px] leading-relaxed flex-1">${marked.parse(text)}</div>`;
            container.appendChild(div);
        }
        this.scroll();
    }

    static addLoader() {
        const id = 'ld-' + Date.now();
        const div = document.createElement('div'); div.id = id; div.className = "msg-ai animate-pulse";
        div.innerHTML = `<div class="ai-icon bg-gray-200"></div><div class="h-4 bg-gray-100 rounded w-1/2 mt-2"></div>`;
        document.getElementById('messages').appendChild(div);
        this.scroll(); return id;
    }

    static removeLoader(id) { document.getElementById(id)?.remove(); }

    static resetChat() {
        document.getElementById('messages').innerHTML = "";
        document.getElementById('hero')?.classList.remove('hidden');
        this.toggleMenu();
    }
}
</script>
</body>
</html>
